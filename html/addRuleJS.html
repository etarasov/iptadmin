<!--h htmlWrapper $content h-->
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Iptables Manager</title>
        <meta name="AUTHOR" content="Evgeny Tarasov" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="DESCRIPTION" content="description"/>
        <meta name="KEYWORDS" content="iptables, haskell" />
        <style type="text/css">
            body { font-family:Arial,Helvetica,sans-serif;
                   background-color: #f0f1ff;
                 }
            tr.even {background-color:#f0fff0}
            table { border-collapse : collapse;
                    background-color: #ddf0dd;
                  }
            th { background-color: #80b090;
                 color: #eeeeee;
               }
            table, th, td { border: 1px dotted black;
                            padding: 5px;
                          }

            #links
                {
                    float: left;
                    background: #eeeeee;
                    padding: 10px;
                }
            #localLinks
                {
                    float: left;
                    background: #deeeee;
                    margin-left: 100px;
                    padding: 10px;
                }
            #rules
                {
                    padding-top: 120px;
                }
        </style>
        <script type="text/javascript">
            function f1()
            {
                var y=document.createElement('option');
                y.text="qwerty";
                document.getElementById("sel").add(y, null);
            }
            function f2()
            {
                var y=document.createElement('input');
                y.setAttribute("type","text");
                y.setAttribute("name","testInput");
                y.setAttribute("value","test text");
                var form = document.getElementById("addform");
                //form.appendChild(y);
                var sbmt = document.getElementById("submit");
                form.insertBefore(y,sbmt);
                
                resetSelect();
            }
            // сброс опции селекта в первую
            function resetSelect()
            {
                var sel=document.getElementById("nextOptSel");
                // Нумерация начинается с 0
                sel.selectedIndex=0;
            }
            function makeProtocolOption()
            {
                resetSelect();

                // Создаём таблицу с подформой ввода протокола

                var subForm = createProtocolOptionTd()

                var nextTd = document.getElementById("nextOptTd");
                var theraw = document.getElementById("theraw");
                theraw.insertBefore(subForm, nextTd);

            }
            function createProtocolOptionTd()
            {
            /*
                <td id="protocolTd">      td1
                    <table>  table1
                        <tr>   tr1
                            <td>    td2
                                <label for="protocol">Протокол</label>   label1
                            </td>
                            <td>    td3
                                <select id="protocol">    select
                                    <option value="tcp">TCP</option>   option1
                                    ...
                                </select>
                            </td>
                        </tr>
                        <tr>          tr2
                            <td>        td4
                                <label>Удалить</label>  label2
                            </td>
                        </tr>
                    </table>
                </td>
            */
                var td1=document.createElement('td');
                td1.setAttribute("id","protocolTd");

                var table1=document.createElement('table');

                var tr1=document.createElement('tr');

                var td2=document.createElement('td2');

                var label1=document.createElement('label');
                label1.setAttribute("for","protocol");
                label1.innerHTML="Протокол";
                td2.appendChild(label1);
                tr1.appendChild(td2);

                var td3=document.createElement('td');

                var select=document.createElement('select');
                select.setAttribute("id","protocol");

                var protSelOpt=document.createElement('option');
                protSelOpt.setAttribute("value","tcp");
                protSelOpt.innerHTML="TCP";
                select.appendChild(protSelOpt);
                var protSelOpt=document.createElement('option');
                protSelOpt.setAttribute("value","udp");
                protSelOpt.innerHTML="UDP";
                select.appendChild(protSelOpt);
                var protSelOpt=document.createElement('option');
                protSelOpt.setAttribute("value","icmp");
                protSelOpt.innerHTML="ICMP";
                select.appendChild(protSelOpt);

                td3.appendChild(select);

                tr1.appendChild(td3);

                table1.appendChild(tr1);

                var tr2=document.createElement('tr');

                var td4=document.createElement('td');

                var label2=document.createElement('label');
                label2.innerHTML="Удалить";

                td4.appendChild(label2);

                tr2.appendChild(td4);

                table1.appendChild(tr2);

                td1.appendChild(table1);

                return td1;
            }
        </script>
    </head>
    <body>
        <form id="addform" action="">
            <table>
                <tr id="theraw">
                    <td id="nextOptTd">
                        <select id="nextOptSel">
                            <option value="choose">Choose option</option>
                            <option value="protocol" onclick="makeProtocolOption()">Protocol</option>
                            <option value="source">Source</option>
                            <option value="destination">Destination</option>
                            <option value="sport">Source Port</option>
                            <option value="dport">Destination Port</option>
                            <option value="port">Port</option>
                        </select>
                    </td>
                    <td>
                        <input id="submit" type="submit" value="Submit" onclick="f1()"/>
                    </td>
                </tr>
            </table>
        </form>
    </body>
</html>
<!--^^^-->

